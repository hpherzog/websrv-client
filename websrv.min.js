(function(){!function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e){var t=e("./src/client"),n={};n.Client=t.Client,void 0===window.websrv?window.websrv=n:console.error("window.websrv is already in use!")},{"./src/client":11}],2:[function(e,t){function n(e,t){return p.isUndefined(t)?""+t:!p.isNumber(t)||!isNaN(t)&&isFinite(t)?p.isFunction(t)||p.isRegExp(t)?t.toString():t:t.toString()}function r(e,t){return p.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return r(JSON.stringify(e.actual,n),128)+" "+e.operator+" "+r(JSON.stringify(e.expected,n),128)}function o(e,t,n,r,i){throw new d.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function s(e,t){e||o(e,!0,t,"==",d.ok)}function u(e,t){if(e===t)return!0;if(p.isBuffer(e)&&p.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return p.isDate(e)&&p.isDate(t)?e.getTime()===t.getTime():p.isRegExp(e)&&p.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:p.isObject(e)||p.isObject(t)?l(e,t):e==t}function c(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function l(e,t){if(p.isNullOrUndefined(e)||p.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(c(e))return c(t)?(e=h.call(e),t=h.call(t),u(e,t)):!1;try{var n,r,i=g(e),o=g(t)}catch(s){return!1}if(i.length!=o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!u(e[n],t[n]))return!1;return!0}function a(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function f(e,t,n,r){var i;p.isString(n)&&(r=n,n=null);try{t()}catch(s){i=s}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&o(i,n,"Missing expected exception"+r),!e&&a(i,n)&&o(i,n,"Got unwanted exception"+r),e&&i&&n&&!a(i,n)||!e&&i)throw i}var p=e("util/"),h=Array.prototype.slice,v=Object.prototype.hasOwnProperty,d=t.exports=s;d.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,s=t.name,u=r.indexOf("\n"+s);if(u>=0){var c=r.indexOf("\n",u+1);r=r.substring(c+1)}this.stack=r}}},p.inherits(d.AssertionError,Error),d.fail=o,d.ok=s,d.equal=function(e,t,n){e!=t&&o(e,t,n,"==",d.equal)},d.notEqual=function(e,t,n){e==t&&o(e,t,n,"!=",d.notEqual)},d.deepEqual=function(e,t,n){u(e,t)||o(e,t,n,"deepEqual",d.deepEqual)},d.notDeepEqual=function(e,t,n){u(e,t)&&o(e,t,n,"notDeepEqual",d.notDeepEqual)},d.strictEqual=function(e,t,n){e!==t&&o(e,t,n,"===",d.strictEqual)},d.notStrictEqual=function(e,t,n){e===t&&o(e,t,n,"!==",d.notStrictEqual)},d.throws=function(){f.apply(this,[!0].concat(h.call(arguments)))},d.doesNotThrow=function(){f.apply(this,[!1].concat(h.call(arguments)))},d.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var t=[];for(var n in e)v.call(e,n)&&t.push(n);return t}},{"util/":4}],3:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],4:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(t)?r.showHidden=t:t&&n._extend(r,t),S(r.showHidden)&&(r.showHidden=!1),S(r.depth)&&(r.depth=2),S(r.colors)&&(r.colors=!1),S(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function s(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function c(e,t,r){if(e.customInspect&&t&&x(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return w(i)||(i=c(e,i,r)),i}var o=l(e,t);if(o)return o;var s=Object.keys(t),d=u(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),T(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return a(t);if(0===s.length){if(x(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(E(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(k(t))return e.stylize(Date.prototype.toString.call(t),"date");if(T(t))return a(t)}var m="",y=!1,b=["{","}"];if(v(t)&&(y=!0,b=["[","]"]),x(t)){var S=t.name?": "+t.name:"";m=" [Function"+S+"]"}if(E(t)&&(m=" "+RegExp.prototype.toString.call(t)),k(t)&&(m=" "+Date.prototype.toUTCString.call(t)),T(t)&&(m=" "+a(t)),0===s.length&&(!y||0==t.length))return b[0]+m+b[1];if(0>r)return E(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var _;return _=y?f(e,t,r,d,s):s.map(function(n){return p(e,t,r,d,n,y)}),e.seen.pop(),h(_,m,b)}function l(e,t){if(S(t))return e.stylize("undefined","undefined");if(w(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):d(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function a(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i){for(var o=[],s=0,u=t.length;u>s;++s)o.push(N(t,String(s))?p(e,t,n,r,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(e,t,n,r,i,!0))}),o}function p(e,t,n,r,i,o){var s,u,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?u=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(u=e.stylize("[Setter]","special")),N(r,i)||(s="["+i+"]"),u||(e.seen.indexOf(l.value)<0?(u=g(n)?c(e,l.value,null):c(e,l.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),S(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function h(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function v(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function m(e){return null==e}function y(e){return"number"==typeof e}function w(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function S(e){return void 0===e}function E(e){return _(e)&&"[object RegExp]"===O(e)}function _(e){return"object"==typeof e&&null!==e}function k(e){return _(e)&&"[object Date]"===O(e)}function T(e){return _(e)&&("[object Error]"===O(e)||e instanceof Error)}function x(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function O(e){return Object.prototype.toString.call(e)}function j(e){return 10>e?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[j(e.getHours()),j(e.getMinutes()),j(e.getSeconds())].join(":");return[e.getDate(),M[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var z=/%[sdj%]/g;n.format=function(e){if(!w(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(e).replace(z,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];o>n;u=r[++n])s+=g(u)||!_(u)?" "+u:" "+i(u);return s},n.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(S(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var D,q={};n.debuglog=function(e){if(S(D)&&(D=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!q[e])if(new RegExp("\\b"+e+"\\b","i").test(D)){var r=t.pid;q[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else q[e]=function(){};return q[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=v,n.isBoolean=d,n.isNull=g,n.isNullOrUndefined=m,n.isNumber=y,n.isString=w,n.isSymbol=b,n.isUndefined=S,n.isRegExp=E,n.isObject=_,n.isDate=k,n.isError=T,n.isFunction=x,n.isPrimitive=A,n.isBuffer=e("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",L(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!_(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("v229Ge"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":3,inherits:7,v229Ge:8}],5:[function(e,t){(function(n){function r(){}function i(){p.log.apply(p,arguments)}function o(){p.log.apply(p,arguments)}function s(){p.warn.apply(p,arguments)}function u(e){d[e]=Date.now()}function c(e){var t=d[e];if(!t)throw new Error("No such label: "+e);var n=Date.now()-t;p.log(e+": "+n+"ms")}function l(){var e=new Error;e.name="Trace",e.message=h.format.apply(null,arguments),p.error(e.stack)}function a(e){p.log(h.inspect(e)+"\n")}function f(e){if(!e){var t=v.call(arguments,1);f.ok(!1,h.format.apply(null,t))}}var p,h=e("util"),f=e("assert"),v=Array.prototype.slice,d={};p="undefined"!=typeof n&&n.console?n.console:"undefined"!=typeof window&&window.console?window.console:{};for(var g=[[r,"log"],[i,"info"],[o,"warn"],[s,"error"],[u,"time"],[c,"timeEnd"],[l,"trace"],[a,"dir"],[f,"assert"]],m=0;m<g.length;m++){var y=g[m],w=y[0],b=y[1];p[b]||(p[b]=w)}t.exports=p}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{assert:2,util:10}],6:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,c,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,u=new Array(i-1),c=1;i>c;c++)u[c-1]=arguments[c];n.apply(this,u)}else if(o(n)){for(i=arguments.length,u=new Array(i-1),c=1;i>c;c++)u[c-1]=arguments[c];for(l=n.slice(),i=l.length,c=0;i>c;c++)l[c].apply(this,u)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],7:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],8:[function(e,t){function n(){}var r=t.exports={};r.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),n.length>0)){var r=n.shift();r()}},!0),function(e){n.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=n,r.addListener=n,r.once=n,r.off=n,r.removeListener=n,r.removeAllListeners=n,r.emit=n,r.binding=function(){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(){throw new Error("process.chdir is not supported")}},{}],9:[function(e,t){t.exports=e(3)},{}],10:[function(e,t){t.exports=e(4)},{"./support/isBuffer":9,inherits:7,v229Ge:8}],11:[function(e,t){function n(e){this.url=e.url,this.webSocket=null,this.reconnectTimer=null,this.reconnectTimeout=3e3,this.keepAliveTimer=null,this.keepAliveTimeout=1e4,this.keepAliveSendTimer=null,this.keepAliveSendTimeout=6e3}var r=(e("console"),e("util")),i=e("events");r.inherits(n,i.EventEmitter),n.prototype.open=function(){null===this.webSocket&&(this.webSocket=new WebSocket(this.url),this.webSocket.onopen=this.getOpenHandler(),this.webSocket.onclose=this.getCloseHandler(),this.webSocket.onerror=this.getErrorHandler(),this.webSocket.onmessage=this.getMessageHandler(),this.emit("connecting"),this.startReconnectTimer())},n.prototype.destroyWebSocket=function(){null!==this.webSocket&&(this.webSocket.onopen=null,this.webSocket.onclose=null,this.webSocket.onerror=null,this.webSocket.onmessage=null,this.webSocket.close(),this.webSocket=null)},n.prototype.close=function(){this.stopKeepAliveTimer(),this.stopKeepAliveSendTimer(),this.destroyWebSocket(),this.emit("offline"),this.open()},n.prototype.getOpenHandler=function(){var e=this;return function(){e.emit("online"),e.stopReconnectTimer(),e.startKeepAliveTimer(),e.startKeepAliveSendTimer()}},n.prototype.getCloseHandler=function(){return function(){}},n.prototype.getErrorHandler=function(){var e=this;return function(t){e.emit("error",t)}},n.prototype.getMessageHandler=function(){var e=this;return function(t){e.startKeepAliveTimer(),e.emit("message",t)}},n.prototype.stopKeepAliveTimer=function(){null!==this.keepAliveTimer&&(clearTimeout(this.keepAliveTimer),this.keepAliveTimer=null)},n.prototype.startKeepAliveTimer=function(){var e=this;1===e.webSocket.readyState&&e.emit("alive"),e.stopKeepAliveTimer(),e.keepAliveTimer=setTimeout(function(){e.close()},e.keepAliveTimeout)},n.prototype.stopKeepAliveSendTimer=function(){null!==this.keepAliveSendTimer&&(clearTimeout(this.keepAliveSendTimer),this.keepAliveSendTimer=null)},n.prototype.startKeepAliveSendTimer=function(){var e=this;e.stopKeepAliveSendTimer(),e.keepAliveSendTimer=setTimeout(function(){e.sendKeepAlive()},e.keepAliveSendTimeout)},n.prototype.stopReconnectTimer=function(){null!==this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},n.prototype.startReconnectTimer=function(){var e=this;e.stopReconnectTimer(),e.reconnectTimer=setInterval(function(){e.destroyWebSocket(),e.open()},e.reconnectTimeout)},n.prototype.sendKeepAlive=function(){this.send("")},n.prototype.send=function(e){1===this.webSocket.readyState&&(this.startKeepAliveSendTimer(),this.webSocket.send(e))},t.exports.Client=n},{console:5,events:6,util:10}]},{},[1]);})();